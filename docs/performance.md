# パフォーマンス・運用面の工夫

AI Skill Map Generator は個人開発のアプリですが、「実際に使われること」を前提に、表示速度や運用面でもいくつか工夫をしています。

## Next.js / Vercel を前提にした構成

- Next.js 15 (App Router) を使用し、SSR とクライアントコンポーネントを適切に分離しています。
- Vercel にデプロイすることを前提に、**Edge Functions / Serverless Functions** を使った API 実行を想定した構成にしています。

## 体感速度を上げるための工夫

- グローバルなローディング UI（`app/loading.tsx`）や、ダッシュボードでのスケルトンコンポーネント（`components/ui/skeleton.tsx`）を用意し、API レスポンス待ちの間も「動いている感」が伝わるようにしています。
- Skill Map 一覧や結果画面では、**アニメーションの量を控えめにしつつ、要所だけフェードインを入れる**ことで、重く感じない範囲での視覚的なフィードバックを加えています。

## API / コスト面での配慮

- OpenAI API へのリクエストは、**必要な情報だけをまとめて送る**ようにし、無駄な再リクエストが発生しないように `lib/apiClient.ts` 側でまとめています。
- Supabase 側では、`usage_logs` テーブルで利用状況を記録し、`/admin/usage` でどの機能がどの程度使われているかを把握できるようにしています。将来的なコスト最適化のための下準備です。

## 今後の改善候補

- Lighthouse を用いたパフォーマンス計測結果のレポート化（`docs/` へのスクリーンショット保存など）
- OpenAI / Supabase へのリクエスト回数をメトリクスとして集約し、単位時間あたりのコストを見える化する仕組み
- 重いチャートや一覧コンポーネントに対する遅延読み込み（dynamic import）やメモ化の追加



